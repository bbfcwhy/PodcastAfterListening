# Feature Specification: Podcast 聽後回顧網站

**Feature Branch**: `001-podcast-review-site`
**Created**: 2026-01-28
**Status**: Draft
**Input**: User description: "我想要設計開發一個網頁，是放我聽過的所有Podcast節目，裡面會有原始的podcast節目連結，也會有主持人簡介，每一集的節目業配內容和節目大綱(用AI自動解析出來的，我另外用n8n已經做好工作流，會另行上傳到Supabase），然後有一個區塊是我自己聽過的一些感想和心得，還有給網友留言的討論區。由於是一個人開發和維護，所以會用到很多AI工具，所以要有一些警語是說明節目內容僅供參考，一切以原始Podcast節目內容為準。我之後想放聯盟行銷在這個網站上。"

## Clarifications

### Session 2026-01-28

- Q: 訪客留言的身份驗證方式？ → A: 社群帳號登入 (Google/Facebook/GitHub OAuth)
- Q: 外部資料庫服務無法連線時的處理方式？ → A: 顯示快取的靜態內容，並提示「資料可能非最新」
- Q: 網站內容結構層級？ → A: 混合模式，首頁同時顯示最新單集和節目分類入口
- Q: 留言內容審核機制？ → A: 自動過濾 + 手動複審，系統自動偵測可疑內容標記待審，其餘即時顯示
- Q: 網站內部搜尋功能？ → A: 進階搜尋，全文搜尋 + 篩選條件（依節目、日期範圍、標籤）

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 瀏覽 Podcast 內容 (Priority: P1)

訪客進入網站首頁後，可以同時看到：(1) 最新收錄的單集節目列表，(2) 節目系列分類入口。訪客可以直接點擊單集查看詳情，或透過節目分類瀏覽特定節目的所有單集。

**Why this priority**: 這是網站的核心功能，混合模式讓訪客能快速發現最新內容，也能依節目系列深入探索。

**Independent Test**: 可以透過訪問首頁並確認最新單集列表和節目分類入口正確顯示來獨立測試。

**Acceptance Scenarios**:

1. **Given** 網站首頁已載入, **When** 訪客瀏覽頁面, **Then** 顯示最新收錄的單集列表和節目系列分類入口
2. **Given** 首頁已顯示, **When** 訪客點擊某個單集, **Then** 導航至該單集的詳情頁面
3. **Given** 首頁已顯示, **When** 訪客點擊某個節目系列, **Then** 導航至該節目的專屬頁面，列出所有已收錄單集
4. **Given** 尚無任何節目資料, **When** 訪客瀏覽首頁, **Then** 顯示友善的空狀態訊息

---

### User Story 2 - 查看單集節目詳情 (Priority: P1)

訪客可以查看單集 Podcast 的完整資訊，包含：原始節目連結、主持人簡介、AI 生成的節目大綱、業配內容摘要，以及站長的個人聽後心得。頁面上方需顯示 AI 內容警語。

**Why this priority**: 這是網站提供價值的核心頁面，讓訪客快速了解一集節目的重點內容，節省收聽前的決策時間。

**Independent Test**: 可以透過直接訪問某集節目頁面來測試，確認所有區塊正確顯示且原始連結可正常開啟。

**Acceptance Scenarios**:

1. **Given** 訪客在節目詳情頁面, **When** 頁面載入完成, **Then** 顯示節目標題、原始連結、主持人簡介、節目大綱、業配內容和站長心得
2. **Given** 訪客在節目詳情頁面, **When** 點擊原始節目連結, **Then** 在新分頁開啟原始 Podcast 播放頁面
3. **Given** 節目詳情頁面載入, **When** 頁面顯示, **Then** AI 內容警語清楚可見於頁面顯眼位置

---

### User Story 3 - 網友留言討論 (Priority: P2)

訪客可以在每集節目下方的討論區留言，分享自己的想法或與其他聽眾交流。留言需要基本的身份驗證以防止濫用。

**Why this priority**: 討論區增加網站互動性和社群感，但不是查看節目資訊的必要功能。

**Independent Test**: 可以透過在討論區發表留言並確認留言顯示來測試，不依賴其他功能運作。

**Acceptance Scenarios**:

1. **Given** 訪客在節目詳情頁面, **When** 滾動至討論區, **Then** 顯示現有留言列表和留言輸入區域
2. **Given** 訪客已完成身份驗證, **When** 提交留言內容, **Then** 留言即時顯示於討論區
3. **Given** 訪客尚未驗證身份, **When** 嘗試發表留言, **Then** 提示需要先進行身份驗證

---

### User Story 4 - 聯盟行銷內容展示 (Priority: P3)

網站在適當位置展示聯盟行銷內容，包含相關產品推薦或服務連結，並清楚標示為推廣內容。

**Why this priority**: 聯盟行銷是未來的商業化目標，但不影響網站核心的內容展示功能。

**Independent Test**: 可以透過確認聯盟行銷區塊正確顯示且連結可追蹤來測試。

**Acceptance Scenarios**:

1. **Given** 節目詳情頁面載入, **When** 頁面有相關聯盟行銷內容, **Then** 在指定區域顯示推廣內容並標示為「推廣」或「廣告」
2. **Given** 訪客點擊聯盟行銷連結, **When** 連結被點擊, **Then** 正確追蹤點擊並導向目標頁面

---

### User Story 5 - 站長後台內容管理 (Priority: P2)

站長可以透過後台新增、編輯或刪除節目內容，包含手動編輯 AI 生成的大綱、更新個人心得，以及管理討論區留言。

**Why this priority**: 維護網站內容的基本需求，但初期可透過直接操作資料庫完成，後台只是提升效率。

**Independent Test**: 可以透過在後台新增一筆節目資料並確認前台正確顯示來測試。

**Acceptance Scenarios**:

1. **Given** 站長已登入後台, **When** 新增一筆節目資料, **Then** 節目出現在前台列表中
2. **Given** 站長在後台編輯節目, **When** 修改節目大綱內容, **Then** 前台顯示更新後的內容
3. **Given** 站長在後台查看討論區, **When** 刪除違規留言, **Then** 該留言從前台移除

---

### User Story 6 - 搜尋節目內容 (Priority: P2)

訪客可以透過搜尋功能快速找到感興趣的節目內容，支援全文搜尋和多種篩選條件。

**Why this priority**: 當節目數量增加後，搜尋功能可大幅提升內容發現性，但初期節目量少時可透過瀏覽完成。

**Independent Test**: 可以透過輸入關鍵字搜尋並確認結果正確顯示來測試。

**Acceptance Scenarios**:

1. **Given** 訪客在任意頁面, **When** 點擊搜尋欄並輸入關鍵字, **Then** 顯示符合節目名稱、標題或大綱內容的搜尋結果
2. **Given** 搜尋結果已顯示, **When** 訪客套用篩選條件（節目系列、日期範圍、標籤）, **Then** 結果依條件過濾
3. **Given** 搜尋關鍵字無符合結果, **When** 頁面顯示, **Then** 顯示友善的空狀態訊息並建議調整搜尋條件

---

### Edge Cases

- 當 AI 生成的節目大綱或業配內容為空時，該區塊顯示「內容準備中」的提示
- 當原始 Podcast 連結失效時，顯示友善的錯誤提示並建議用戶搜尋節目名稱
- 當討論區留言包含不當內容時，站長可以快速刪除或隱藏
- 當訪客快速連續留言時，進行頻率限制以防止濫發（限制：每分鐘最多 3 條留言）
- 當節目數量眾多時，提供分頁或無限滾動以維持頁面效能
- 當外部資料庫服務無法連線時，顯示快取的靜態內容並提示「資料可能非最新」，留言等即時功能暫時停用

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統 MUST 顯示所有已收錄的 Podcast 節目列表，包含名稱、封面和簡介
- **FR-002**: 系統 MUST 為每集節目提供詳情頁面，展示完整資訊
- **FR-003**: 系統 MUST 在每個節目詳情頁顯示可點擊的原始 Podcast 連結
- **FR-004**: 系統 MUST 顯示每位主持人的簡介資訊
- **FR-005**: 系統 MUST 展示 AI 生成的節目大綱內容（資料來源：外部工作流上傳至資料庫）
- **FR-006**: 系統 MUST 展示節目的業配內容摘要（資料來源：外部工作流上傳至資料庫）
- **FR-007**: 系統 MUST 提供站長心得區塊，顯示站長對每集節目的個人感想
- **FR-008**: 系統 MUST 在所有 AI 生成內容附近顯示警語：「以下內容由 AI 自動解析產生，僅供參考，一切以原始 Podcast 節目內容為準」
- **FR-009**: 系統 MUST 提供討論區功能，讓訪客可以留言交流
- **FR-010**: 系統 MUST 要求留言者透過社群帳號登入 (支援 Google/Facebook/GitHub OAuth) 進行身份驗證
- **FR-011**: 系統 MUST 提供站長管理介面，可新增、編輯、刪除節目內容
- **FR-012**: 系統 MUST 自動偵測可疑留言內容（如垃圾訊息、不當用語）並標記為待審核狀態，其餘留言即時顯示
- **FR-012a**: 系統 MUST 提供站長審核介面，可批准、刪除或隱藏待審留言
- **FR-013**: 系統 MUST 預留聯盟行銷展示區塊，可在指定位置放置推廣內容
- **FR-014**: 聯盟行銷內容 MUST 清楚標示為推廣或廣告內容
- **FR-015**: 系統 MUST 追蹤聯盟行銷連結的點擊次數
- **FR-016**: 系統 MUST 提供全文搜尋功能，可搜尋節目名稱、單集標題、大綱內容
- **FR-017**: 系統 MUST 提供搜尋篩選條件，包含依節目系列、日期範圍、標籤進行過濾

### Key Entities

- **Podcast 節目 (Show)**: 代表一個 Podcast 節目系列，包含節目名稱、封面圖片、節目描述、原始連結
- **主持人 (Host)**: 節目主持人資訊，包含姓名、簡介、頭像，一個節目可有多位主持人
- **單集節目 (Episode)**: 單一集節目內容，包含標題、發布日期、原始連結、AI 生成大綱、業配內容摘要、站長心得
- **留言 (Comment)**: 訪客在節目下的留言，包含留言者資訊、內容、發布時間、狀態（顯示/隱藏）
- **聯盟行銷內容 (Affiliate Content)**: 推廣內容，包含標題、描述、目標連結、點擊統計、關聯節目
- **標籤 (Tag)**: 內容分類標籤，可套用於單集節目，用於搜尋篩選和內容探索

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 訪客可在 3 秒內從首頁找到並點擊進入任一節目詳情頁
- **SC-002**: 節目詳情頁載入後，訪客可在 5 秒內找到並點擊原始 Podcast 連結
- **SC-003**: 90% 的訪客能在第一次嘗試時成功完成留言發布
- **SC-004**: 站長可在 2 分鐘內完成一筆新節目的內容建立
- **SC-005**: 系統可支援同時 500 位訪客瀏覽而不影響使用體驗
- **SC-006**: AI 內容警語在所有節目頁面的可見率達 100%
- **SC-007**: 聯盟行銷連結的點擊可被正確追蹤，追蹤準確率達 99%

## Assumptions

- 節目大綱和業配內容的 AI 解析已由外部 n8n 工作流完成，本系統僅負責讀取和展示
- 資料儲存使用外部資料庫服務（如 Supabase），系統需能連接讀取
- 網站為公開內容，任何人都可瀏覽節目資訊，只有發表留言需要身份驗證
- 初期內容量預估在 100 集節目以內，效能設計以此為基準
- 聯盟行銷功能為未來擴充，初期可僅預留介面位置
- 網站以中文為主要語言
- 站長為單一使用者，後台不需多用戶權限管理

## Dependencies

- 外部 n8n 工作流：負責 AI 解析 Podcast 內容並上傳至資料庫
- 外部資料庫服務：儲存所有節目資料、留言資料
- 身份驗證服務：處理訪客留言的身份驗證
